From 00cd430d60782a0f3154f865df0c2e5d7dd080f7 Mon Sep 17 00:00:00 2001
From: Mikhail Anikin <mikhail.anikin@solid-run.com>
Date: Wed, 19 Jul 2023 12:04:28 +0300
Subject: [PATCH] Disable M.2 rfkill for pcie support

---
 arch/arm64/boot/dts/freescale/imx8mp-hummingboard-pulse.dts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/freescale/imx8mp-hummingboard-pulse.dts b/arch/arm64/boot/dts/freescale/imx8mp-hummingboard-pulse.dts
index eb46031b3965..f20daa6ab6d4 100644
--- a/arch/arm64/boot/dts/freescale/imx8mp-hummingboard-pulse.dts
+++ b/arch/arm64/boot/dts/freescale/imx8mp-hummingboard-pulse.dts
@@ -104,6 +104,7 @@ reg_vdd_1v8: regulator-vdd-1v8 {
 		regulator-always-on;
 	};
 
+// Enable this node for M.2 LTE modem rfkill support
 	rfkill_m2_wdis {
 		compatible = "rfkill-gpio";
 		pinctrl-names = "default";
@@ -112,7 +113,7 @@ rfkill_m2_wdis {
 		rfkill-type = <5>;
 		reset-gpio = <&gpio1 6 GPIO_ACTIVE_HIGH>;
 		shutdown-gpio = <&gpio1 13 GPIO_ACTIVE_HIGH>;
-		status = "okay";
+		status = "disable";
 	};
 
 	rfkill_m2_gps {
-- 
2.41.0

